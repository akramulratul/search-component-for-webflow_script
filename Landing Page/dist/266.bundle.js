"use strict";(self.webpackChunksearch=self.webpackChunksearch||[]).push([[266],{5266:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(7294),a=n(2861),c=n(549);const o=function(e){var t=e.cards;return Array(t).fill(0).map((function(e,t){return r.createElement(c.y,{baseColor:"#0c222d17",highlightColor:"#03172630",key:t},r.createElement("div",{className:"list-item"},r.createElement("div",{className:"card-skeleton"},r.createElement("div",{className:"left-col"},r.createElement(c.Z,{width:104}),r.createElement(c.Z,{width:48})),r.createElement("div",{className:"right-col"},r.createElement(c.Z,{circle:!0,width:24,height:24})))))}))};function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const l=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,c=(t=(0,r.useState)(e),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(i)throw a}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=c[0],l=c[1];return(0,r.useEffect)((function(){var t=setTimeout((function(){return l(e)}),a);return function(){clearTimeout(t)}}),[e,a]),o};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(i)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=function(e){var t=e.result,n=e.setQuery,a=e.setShowDropdown,c=e.setSelectCity,o=e.setSelectedCityName,u=e.index,l=e.inputRef,s=i((0,r.useState)(-1),2),f=s[0],m=s[1],d=i((0,r.useState)(-1),2),y=d[0],h=d[1],p=t.hotel_name?t.hotel_name:t.city_name?t.city_name:t.state_name,v=y===u||f===u?t.hotel_name?"https://uploads-ssl.webflow.com/64c0d745032daeee059a783c/64c0d745032daeee059a7a06_hotelHover.svg":"https://uploads-ssl.webflow.com/645a6f68de0f1a36cccdbead/64b5763404f2fbab0d8ec588_hoverLocation.svg":t.hotel_name?"https://uploads-ssl.webflow.com/645a6f68de0f1a36cccdbead/64bfab922cc46c71a5af0e74_hotel.svg":"https://uploads-ssl.webflow.com/645a6f68de0f1a36cccdbead/64b420a332dbf85fa5a2b6a9_Icon.svg";return r.createElement("div",{className:"active"},r.createElement("div",{className:"list-item",onMouseEnter:function(){return m(u)},onMouseLeave:function(){return m(-1)},onTouchStart:function(){return h(u)},onTouchEnd:function(){return h(-1)}},r.createElement("div",{className:"frame2",onClick:function(){t.hotel_name?t.hotel_name:t.city_name?t.city_name:t.state_name&&t.state_name,n(t.content),a(!1),c(t),o({cityName:t.city_name,stateName:t.state_name,countryName:t.country_name,hotelName:t.hotel_name,content:t.content,searchID:t.searchable_id}),setTimeout((function(){l.current.focus()}),0)}},r.createElement("div",{className:"label"},p),r.createElement("div",{className:"caption"}," ",function(e){if("City"===e.searchable_type){if(!e.country_name)return"";if(!e.state_name&&e.country_name)return"".concat(e.city_name,", ").concat(e.country_name);if(e.state_name&&e.country_name)return"".concat(e.state_name,", ").concat(e.country_name)}if("SearchPageHotels"===e.searchable_type){if(!e.country_name)return"";if(!e.state_name&&e.city_name&&e.country_name)return"".concat(e.city_name,", ").concat(e.country_name);if(e.state_name&&e.country_name&&e.city_name)return"".concat(e.city_name,", ").concat(e.state_name,", ").concat(e.country_name)}if("States"===e.searchable_type){if(!e.country_name)return"";if(e.state_name&&e.country_name)return"".concat(e.country_name)}}(t))),r.createElement("img",{className:"icon",src:v,alt:""})))};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(i)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.setSelectedCityName,n=e.setSelectedCityCords,c=e.onCitySelect,u=e.setIsFocused,i=m((0,r.useState)(""),2),s=i[0],d=i[1],y=m((0,r.useState)([]),2),h=y[0],p=y[1],v=m((0,r.useState)(!1),2),b=v[0],_=v[1],g=m((0,r.useState)(!1),2),w=(g[0],g[1]),E=m((0,r.useState)(!1),2),S=E[0],N=E[1],A=m((0,r.useState)(null),2),C=A[0],j=A[1],x=m((0,r.useState)(!1),2),I=x[0],k=x[1],L=l(s,250),O=(0,r.useRef)(null),T=(0,r.useRef)(null);return(0,r.useEffect)((function(){C&&c(C)}),[C,c]),(0,r.useEffect)((function(){var e;return L.length>0&&(N(!0),k(!1),a.Z.get("https://guest-book-backend.vercel.app/api/v1/search/typeahead?query=".concat(L)).then((function(t){p(t.data),0===t.data.length&&(e=setTimeout((function(){k(!0)}),18e4))})).catch((function(e){console.error(e),k(!0)})).finally((function(){N(!1)}))),function(){clearTimeout(e)}}),[L]),(0,r.useEffect)((function(){if(C){var e=C.searchable_type;if(e){var t=e.charAt(0).toUpperCase()+e.slice(1);a.Z.get("https://guest-book-backend.vercel.app/api/v1/search/get_coords?&search_type=".concat(t,"&query=").concat(C.searchable_id)).then((function(e){n({neBoxLat:e.data.ne_box_lat,neBoxLng:e.data.ne_box_lng,swBoxLat:e.data.sw_box_lat,swBoxLng:e.data.sw_box_lng,long:e.data.longitude,lat:e.data.latitude,hLong:e.data.lng,hLat:e.data.lat})})).catch((function(e){return console.error(e)}))}}}),[C]),(0,r.useEffect)((function(){function e(e){O.current&&!O.current.contains(e.target)&&_(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,r.useEffect)((function(){var e=function(){w(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),r.createElement("div",{className:"dropDown_component"},r.createElement("input",{className:"inputSize truncate",type:"text",value:s,ref:T,onChange:function(e){d(e.target.value),_(!0)},placeholder:"Anywhere",onFocus:function(){w(!0),u(!0)},onBlur:function(e){O.current&&O.current.contains(e.relatedTarget)||u(!1)}}),s.length>0&&b&&r.createElement("div",{className:"dropDown",ref:O,onMouseDown:function(e){e.stopPropagation(),e.preventDefault()}},r.createElement("div",{className:"search-bar-dropdown"},r.createElement("div",{className:"dropdown"},r.createElement("div",{className:"frame"},S?r.createElement(o,{cards:4}):I?r.createElement("p",null,"No results found."):h.length>0?h.map((function(e,n){return r.createElement(f,{result:e,index:n,key:e.searchable_id,setQuery:d,setShowDropdown:_,setSelectCity:j,setSelectedCityName:t,inputRef:T})})):r.createElement(o,{cards:4}))))))}y.defaultProps={setIsFocused:function(){}};const h=y}}]);